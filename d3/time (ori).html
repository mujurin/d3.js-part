<!DOCTYPE html>
<html lang="en-US">
  <head>
  <meta charset="UTF-8">
  <script src="//d3js.org/d3.v3.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<script src="js/epoch.min.js"></script>
<link rel="stylesheet" type="text/css" href="css/epoch.min.css">
  </head>
  <body>
  <div id="barChart" class="epoch category10" style="width:320px; height: 240px;"></div>
<script>
d3.json("generated.json", function(error, data) {
$.each(data, function(key, value){
	col=Object.keys(value)[0];
	row=Object.keys(value)[1];
  });

 var da=new Array();
 var dataa;
  

  var t=0;
  data.forEach(function(d) {
	 d.col = d[col];
        d.row = +d[row];
	da[t]='[{"time":'+d.col+',"y":'+d.row+'}]';
  t++;
  });

var sing=JSON.parse(da[0]);

  var barChartData = [{label: "Series 1",values:sing}];
var barChartInstance = $('#barChart').epoch({
  type: 'time.line',
  axes: ['right', 'bottom'],
  data: barChartData,
});

  var d=1;
window.setInterval(updateGraph, 1000);  
function updateGraph() {
    var sing=JSON.parse(da[d]);
  var newBarChartData = sing;
  barChartInstance.push(newBarChartData);
d++;
}
});
</script>
</body>
</html>